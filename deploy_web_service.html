
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Documentation for the PESTO toolbox" name="description"/>
<meta content="Airbus Defence and Space - Processing Factory Team" name="author"/>
<link href="https://airbusdefenceandspace.github.io/pesto/deploy_web_service.html" rel="canonical"/>
<link href="deploy_run_docker_image.html" rel="prev"/>
<link href="pesto_init.html" rel="next"/>
<link href="assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.11" name="generator"/>
<title>Web-service - PESTO : ProcESsing facTOry</title>
<link href="assets/stylesheets/main.4af4bdda.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#restful-api-presentation">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="PESTO : ProcESsing facTOry" class="md-header__button md-logo" data-md-component="logo" href="index.html" title="PESTO : ProcESsing facTOry">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            PESTO : ProcESsing facTOry
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Web-service
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/AirbusDefenceAndSpace/pesto" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    AirbusDefenceAndSpace/pesto
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="PESTO : ProcESsing facTOry" class="md-nav__button md-logo" data-md-component="logo" href="index.html" title="PESTO : ProcESsing facTOry">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    PESTO : ProcESsing facTOry
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/AirbusDefenceAndSpace/pesto" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    AirbusDefenceAndSpace/pesto
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="get_started.html">
<span class="md-ellipsis">
    Get started
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Package an Algorithm
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Package an Algorithm
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="package_pesto_project.html">
<span class="md-ellipsis">
    Create a PESTO project
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="package_configuration.html">
<span class="md-ellipsis">
    Project configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="package_docker_image.html">
<span class="md-ellipsis">
    Build the Docker image
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="package_test.html">
<span class="md-ellipsis">
    Test the Docker image
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Run the Algorithm
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Run the Algorithm
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="deploy_run_docker_image.html">
<span class="md-ellipsis">
    Run the packaged algorithm
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Web-service
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="deploy_web_service.html">
<span class="md-ellipsis">
    Web-service
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pesto-endpoints">
<span class="md-ellipsis">
      PESTO endpoints
    </span>
</a>
<nav aria-label="PESTO endpoints" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#describe">
<span class="md-ellipsis">
      describe
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#health">
<span class="md-ellipsis">
      health
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#process">
<span class="md-ellipsis">
      process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#jobs-list">
<span class="md-ellipsis">
      Jobs list
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#job-status-asynchronous">
<span class="md-ellipsis">
      Job status (asynchronous)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#job-result-asynchronous">
<span class="md-ellipsis">
      Job result (asynchronous)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stateful-stateless-services">
<span class="md-ellipsis">
      Stateful &amp; Stateless services
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    PESTO commands
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            PESTO commands
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="pesto_init.html">
<span class="md-ellipsis">
    init
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="pesto_schemagen.html">
<span class="md-ellipsis">
    schemagen
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="pesto_build.html">
<span class="md-ellipsis">
    build
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="pesto_test.html">
<span class="md-ellipsis">
    test
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="pesto_run.html">
<span class="md-ellipsis">
    run
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="pesto_list.html">
<span class="md-ellipsis">
    list
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Tutorial
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="tutorial_pytorch.html">
<span class="md-ellipsis">
    Deploying a pytorch model
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    PESTO in details
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            PESTO in details
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="details_conventions.html">
<span class="md-ellipsis">
    Conventions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="details_design.html">
<span class="md-ellipsis">
    Design
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="details_cookbook.html">
<span class="md-ellipsis">
    Cookbook
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="details_troubleshooting.html">
<span class="md-ellipsis">
    Troubleshooting
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pesto-endpoints">
<span class="md-ellipsis">
      PESTO endpoints
    </span>
</a>
<nav aria-label="PESTO endpoints" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#describe">
<span class="md-ellipsis">
      describe
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#health">
<span class="md-ellipsis">
      health
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#process">
<span class="md-ellipsis">
      process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#jobs-list">
<span class="md-ellipsis">
      Jobs list
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#job-status-asynchronous">
<span class="md-ellipsis">
      Job status (asynchronous)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#job-result-asynchronous">
<span class="md-ellipsis">
      Job result (asynchronous)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stateful-stateless-services">
<span class="md-ellipsis">
      Stateful &amp; Stateless services
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="restful-api-presentation">RestFul API Presentation</h1>
<p>PESTO takes care of the API definition &amp; endpoints through the <a href="https://github.com/AirbusDefenceAndSpace/geoprocessing-api/tree/master/1.0">Geoprocessing API specification</a>.</p>
<p>To learn more about RESTful API, check <a href="https://www.restapitutorial.com/">this tutorial</a></p>
<p>PESTO create web-services following the <a href="https://playground-docs.readthedocs.io">OpenAPI</a> convention. </p>
<h2 id="pesto-endpoints">PESTO endpoints</h2>
<p>From a user point of view, several endpoints are defined:</p>
<ul>
<li><code>/api/v1/describe</code>: a GET request to get information about the packaged algorithm</li>
<li><code>/api/v1/health</code>: a GET request will send back information about the </li>
<li><code>/api/v1/process</code>: Send the payload (contains input data) that we want to process via a POST request</li>
<li><code>api/v1/jobs</code>: a GET request to get the job list (asynchronous)</li>
<li><code>api/v1/jobs/{jobID}/status</code>: a GET request to get a job status (asynchronous)</li>
<li><code>api/v1/jobs/{jobID}/results</code>: a GET request to get a job result (asynchronous)</li>
</ul>
<h3 id="describe"><strong>describe</strong></h3>
<p>It provides a full description of the webservice : Required resources for deployment, Inputs, Outputs, Endpoints.</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://localhost:4000/api/v1/describe
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"algo-service"</span><span class="p">,</span><span class="nt">"resources"</span><span class="p">:{</span><span class="nt">"cpu"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="nt">"gpu"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">"ram"</span><span class="p">:</span><span class="mi">8</span><span class="p">},</span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"algo-service"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Pesto Template contains all the boilerplate you need to create a processing-factory project"</span><span class="p">,</span><span class="nt">"asynchronous"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"pesto@airbus.com"</span><span class="p">,</span><span class="nt">"organization"</span><span class="p">:</span><span class="s2">"pesto"</span><span class="p">,</span><span class="nt">"family"</span><span class="p">:</span><span class="s2">"detection"</span><span class="p">,</span><span class="nt">"version"</span><span class="p">:</span><span class="s2">"1.0.0.dev0"</span><span class="p">,</span><span class="nt">"keywords"</span><span class="p">:[</span><span class="s2">"detection"</span><span class="p">],</span><span class="nt">"template"</span><span class="p">:</span><span class="s2">"object-detection"</span><span class="p">,</span><span class="nt">"config"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Geo Process API config schema for algo-service"</span><span class="p">,</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"padding"</span><span class="p">:{</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Padding / border needed to process the tile. 0 for no padding."</span><span class="p">,</span><span class="nt">"maximum"</span><span class="p">:</span><span class="mi">256</span><span class="p">,</span><span class="nt">"minimum"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"zoom"</span><span class="p">:{</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Zoom levels that can be processed"</span><span class="p">,</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"maximum"</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span><span class="nt">"minimum"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"minItems"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">}},</span><span class="nt">"required"</span><span class="p">:[</span><span class="s2">"zoom"</span><span class="p">,</span><span class="s2">"padding"</span><span class="p">],</span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"tile-object-detection-config"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"input"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"title"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Expected format"</span><span class="p">,</span><span class="nt">"definition"</span><span class="p">:{},</span><span class="nt">"definitions"</span><span class="p">:{</span><span class="nt">"Image"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Image to process : it can be an url or the raw bytes encoded in base64"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">},</span><span class="nt">"Images"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Image"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"Metadata"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"Metadatas"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Metadata"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"Polygon"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"GeoJSON Polygon"</span><span class="p">,</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"bbox"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"minItems"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"coordinates"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"minItems"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"minItems"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:{</span><span class="nt">"enum"</span><span class="p">:[</span><span class="s2">"Polygon"</span><span class="p">],</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">}},</span><span class="nt">"required"</span><span class="p">:[</span><span class="s2">"type"</span><span class="p">,</span><span class="s2">"coordinates"</span><span class="p">],</span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Polygon"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"Polygons"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Polygon"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">}},</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"dict_parameter"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Metadata"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"A dict parameter"</span><span class="p">},</span><span class="nt">"image"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Image"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Input image"</span><span class="p">},</span><span class="nt">"integer_parameter"</span><span class="p">:{</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"A (integer) number parameter"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"integer"</span><span class="p">},</span><span class="nt">"number_parameter"</span><span class="p">:{</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"A (floating point) number parameter"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"object_parameter"</span><span class="p">:{</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"A dict parameter with more spec, of the form {'key':'value'}"</span><span class="p">,</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"key"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">}},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"string_parameter"</span><span class="p">:{</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"A string parameter"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">}},</span><span class="nt">"required"</span><span class="p">:[</span><span class="s2">"image"</span><span class="p">]},</span><span class="nt">"output"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"title"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Expected format"</span><span class="p">,</span><span class="nt">"definition"</span><span class="p">:{},</span><span class="nt">"definitions"</span><span class="p">:{</span><span class="nt">"Image"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Image to process : it can be an url or the raw bytes encoded in base64"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">},</span><span class="nt">"Images"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Image"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"Metadata"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"Metadatas"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Metadata"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"Polygon"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"GeoJSON Polygon"</span><span class="p">,</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"bbox"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"minItems"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"coordinates"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"minItems"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"minItems"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:{</span><span class="nt">"enum"</span><span class="p">:[</span><span class="s2">"Polygon"</span><span class="p">],</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">}},</span><span class="nt">"required"</span><span class="p">:[</span><span class="s2">"type"</span><span class="p">,</span><span class="s2">"coordinates"</span><span class="p">],</span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"Polygon"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"Polygons"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Polygon"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">}},</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"areas"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Polygons"</span><span class="p">},</span><span class="nt">"dict_output"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Metadata"</span><span class="p">},</span><span class="nt">"geojson"</span><span class="p">:{</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"A Geojson.FeatureCollection containing only Polygons as geometries"</span><span class="p">,</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"features"</span><span class="p">:{</span><span class="nt">"items"</span><span class="p">:{</span><span class="nt">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"geometry"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Polygon"</span><span class="p">},</span><span class="nt">"properties"</span><span class="p">:{</span><span class="nt">"oneOf"</span><span class="p">:[{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"null"</span><span class="p">},{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">}]},</span><span class="nt">"type"</span><span class="p">:{</span><span class="nt">"enum"</span><span class="p">:[</span><span class="s2">"Feature"</span><span class="p">],</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">}},</span><span class="nt">"required"</span><span class="p">:[</span><span class="s2">"type"</span><span class="p">,</span><span class="s2">"properties"</span><span class="p">,</span><span class="s2">"geometry"</span><span class="p">],</span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"GeoJSON Feature"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">},</span><span class="nt">"type"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">}},</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">},</span><span class="nt">"image"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Image"</span><span class="p">},</span><span class="nt">"image_list"</span><span class="p">:{</span><span class="nt">"$ref"</span><span class="p">:</span><span class="s2">"#/definitions/Images"</span><span class="p">},</span><span class="nt">"integer_output"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"integer"</span><span class="p">},</span><span class="nt">"number_output"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">},</span><span class="nt">"string_output"</span><span class="p">:{</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">}}},</span><span class="nt">"_links"</span><span class="p">:{</span><span class="nt">"self"</span><span class="p">:{</span><span class="nt">"relation"</span><span class="p">:</span><span class="s2">"Access to describe resource"</span><span class="p">,</span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://localhost:4000/api/v1/describe"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">,</span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"GET"</span><span class="p">},</span><span class="nt">"execution"</span><span class="p">:{</span><span class="nt">"relation"</span><span class="p">:</span><span class="s2">"Processing resource"</span><span class="p">,</span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://localhost:4000/api/v1/process"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"Complex type, see output in describe content for more information"</span><span class="p">,</span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"POST"</span><span class="p">},</span><span class="nt">"config"</span><span class="p">:{</span><span class="nt">"relation"</span><span class="p">:</span><span class="s2">"Processing configuration"</span><span class="p">,</span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://localhost:4000/api/v1/config"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">,</span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"GET"</span><span class="p">},</span><span class="nt">"version"</span><span class="p">:{</span><span class="nt">"relation"</span><span class="p">:</span><span class="s2">"Processing version"</span><span class="p">,</span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://localhost:4000/api/v1/version"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">,</span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"GET"</span><span class="p">},</span><span class="nt">"health"</span><span class="p">:{</span><span class="nt">"relation"</span><span class="p">:</span><span class="s2">"Processing health"</span><span class="p">,</span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://localhost:4000/api/v1/health"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"text/plain"</span><span class="p">,</span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"GET"</span><span class="p">}}}</span>
</code></pre></div>
</div>
<h3 id="health"><strong>health</strong></h3>
<p>It provides a simple health check of the deployed web service</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://localhost:4000/api/v1/health
</code></pre></div>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Return <code>OK</code> if the service is up and running</p>
</div>
<h3 id="process"><strong>process</strong></h3>
<p>It calls the processing function on provided input parameters. If asynchronous is false in the description, then the call blocks until the result is available. Otherwise, the function returns a jobid for later retrieval of the result -- <a href="http://localhost:4000/api/v1/process">process</a></p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">"http://localhost:4000/api/v1/process"</span><span class="w"> </span>-d<span class="w"> </span><span class="o">{</span>process_payload<span class="o">}</span>
</code></pre></div>
<h3 id="jobs-list"><strong>Jobs list</strong></h3>
<p>This endpoint returns the list of submitted job. It is available only if asynchronous is set to true in the description. </p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://localhost:4000/api/v1/jobs
</code></pre></div>
<h3 id="job-status-asynchronous"><strong>Job status (asynchronous)</strong></h3>
<p>This endpoint returns the status of a submitted job. It is available only if asynchronous is set to true in the description. </p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://localhost:4000/api/v1/jobs/<span class="o">{</span>jobID<span class="o">}</span>/status
</code></pre></div>
<h3 id="job-result-asynchronous"><strong>Job result (asynchronous)</strong></h3>
<p>This endpoint returns the result of a submitted job. It is available only if asynchronous is set to true in the description. </p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://localhost:4000/api/v1/jobs/<span class="o">{</span>jobID<span class="o">}</span>/results
</code></pre></div>
<h2 id="stateful-stateless-services">Stateful &amp; Stateless services</h2>
<p>PESTO supports building <a href="https://nordicapis.com/defining-stateful-vs-stateless-web-services/">stateless services as well as stateful services</a>.</p>
<ul>
<li>
<p><strong>Stateless</strong>: The service replies directly to the processing request with the response. These services should have no internal state and should always return the same result when presented with the same payload</p>
</li>
<li>
<p><strong>Stateful</strong>: The service can have internal states, and store the processing results to be later queried.</p>
</li>
</ul>
<p>The main difference is that sending a processing request to <code>api/v1/process</code> to a stateful service will not return the result but a <code>jobID</code>. </p>
<p>The job state can be queried at <code>GET api/v1/jobs/{jobID}/status</code> and results can be queried at  <code>GET api/v1/jobs/{jobID}/results</code> when the job is done. 
The response of the latter request will be a json matching the output schema with URI to individual content (that should individually be queried using <code>GET requests</code>)</p>
<p><img alt="" src="img/pesto_stateful.svg"/></p>
<p>You can build the stateful service by using the <a href="package_docker_image.html#pesto-profiles-advanced">profile tool</a> with:</p>
<div class="highlight"><pre><span></span><code>pesto<span class="w"> </span>build<span class="w"> </span><span class="o">{</span>PESTO_PROJECT_ROOT<span class="o">}</span><span class="w"> </span>-p<span class="w"> </span>stateful
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In practice, it activates the <code>description.stateful.json</code> file (already in template) which set <code>asynchronous</code> at <code>True</code>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My first deployment with PESTO, stateful version"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"asynchronous"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
<p>And start the resulting stateful docker image: </p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-p<span class="w"> </span><span class="m">4000</span>:8080<span class="w"> </span><span class="o">{</span>project-name<span class="o">}</span>:<span class="o">{</span>project-version<span class="o">}</span>-stateful
</code></pre></div>
<p>Then, run the API usage script (<code>python scripts/example_api_usage.py</code>) while having modified the image name to stateful:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Stateful</label><label for="__tabbed_1_2">Stateless</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">service</span> <span class="o">=</span> <span class="s2">"algo-service:1.0.0.dev0-stateful"</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">service</span> <span class="o">=</span> <span class="s2">"algo-service:1.0.0.dev0"</span>
</code></pre></div>
</div>
</div>
</input></input></div>
<p>This script should send several requests (like <code>pesto test</code>), but the advantage is that it doesn't kill the service afterwards, so it is possible to look at what happened:</p>
<ul>
<li>Try doing a get request on <code>/api/v1/jobs/</code> you should see a list of jobs</li>
</ul>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span><span class="s2">"http://localhost:4000/api/v1/jobs/"</span>
</code></pre></div>
<ul>
<li>Grab a job id then do a GET request on <code>/api/v1/jobs/{jobID}/status</code>. </li>
</ul>
<p><div class="highlight"><pre><span></span><code>curl<span class="w"> </span><span class="s2">"http://localhost:4000/api/v1/jobs/{jobID}/status"</span>
</code></pre></div>
It should be "DONE"</p>
<ul>
<li>Then do a GET request on <code>/api/v1/jobs/{jobID}/results</code> to get results</li>
</ul>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span><span class="s2">"http://localhost:4000/api/v1/jobs/{jobID}/results"</span>
</code></pre></div>
<p>It returns the result of the packaged algorithm</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2023 Airbus Defence and Space
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="assets/javascripts/bundle.c8b220af.min.js"></script>
<script src="js/mermaid.min.js"></script>
</body>
</html>